<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶Ü‡¶≤‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶¨‡¶æ</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
</head>
<body class="bg-gray-100">

<script>
    // ------------------ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ Firebase Config (‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶Ü‡¶õ‡ßá) ------------------
    const firebaseConfig = {
        apiKey: "AIzaSyBgpbx7dtJl9beKWx7BB0-w0C5sG-FgLvY",
        authDomain: "amar-sheba-ea1ba.firebaseapp.com",
        projectId: "amar-sheba-ea1ba",
        storageBucket: "amar-sheba-ea1ba.firebasestorage.app",
        messagingSenderId: "563271616190",
        appId: "1:563271616190:web:8abf8874c75121696440ef",
        measurementId: "G-XZ778FPRX1"
    };

    // Firebase Initialize
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤
    let currentUser = null;
    let userBalance = 0;
</script>

<!-- App Container -->
<div id="app" class="max-w-md mx-auto bg-white min-h-screen shadow-lg relative"></div>

<script>
    const app = document.getElementById('app');

    // ---------- ‡¶™‡ßç‡¶∞‡¶´‡ßá‡¶∂‡¶®‡¶æ‡¶≤ ‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡ßá‡¶ú ----------
    function renderLoginPage() {
        app.innerHTML = `
            <div class="min-h-screen bg-gradient-to-br from-blue-600 to-sky-400 flex items-center justify-center p-4">
                <div class="bg-white/95 backdrop-blur-sm rounded-2xl shadow-2xl w-full max-w-md p-8 transform transition-all duration-300 hover:scale-105">
                    <!-- ‡¶≤‡ßã‡¶ó‡ßã ‡¶ì ‡¶π‡ßá‡¶°‡¶æ‡¶∞ -->
                    <div class="text-center mb-8">
                        <div class="bg-blue-600 w-20 h-20 rounded-2xl mx-auto mb-4 flex items-center justify-center shadow-lg transform rotate-3 hover:rotate-0 transition-transform duration-300">
                            <i class="fas fa-hand-holding-heart text-white text-4xl"></i>
                        </div>
                        <h1 class="text-3xl font-bold text-gray-800 mb-2">‡¶Ü‡¶≤‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶¨‡¶æ</h1>
                        <p class="text-gray-500">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶¨‡¶ø‡¶∂‡ßç‡¶¨‡¶∏‡ßç‡¶§ ‡¶Ö‡¶®‡¶≤‡¶æ‡¶á‡¶® ‡¶∏‡ßá‡¶¨‡¶æ ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®‡¶ï‡¶æ‡¶∞‡ßÄ</p>
                    </div>

                    <!-- ‡¶´‡¶∞‡ßç‡¶Æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° -->
                    <div class="bg-gray-50 rounded-xl p-6 shadow-inner">
                        <h2 class="text-xl font-semibold text-gray-700 mb-4 flex items-center">
                            <i class="fas fa-lock text-blue-600 mr-2"></i>
                            ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶≤‡¶ó‡¶á‡¶®
                        </h2>
                        
                        <!-- ‡¶á‡¶®‡¶™‡ßÅ‡¶ü ‡¶´‡¶ø‡¶≤‡ßç‡¶°‡¶∏ -->
                        <div class="space-y-4">
                            <div class="relative">
                                <i class="fas fa-phone-alt absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="text" id="phone" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞" 
                                    class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all">
                            </div>
                            
                            <div class="relative">
                                <i class="fas fa-key absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                                <input type="password" id="password" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°" 
                                    class="w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all">
                            </div>
                        </div>

                        <!-- ‡¶¨‡¶æ‡¶ü‡¶® ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™ -->
                        <div class="space-y-3 mt-6">
                            <button onclick="handleLogin()" 
                                class="w-full bg-gradient-to-r from-blue-600 to-sky-500 text-white py-3 rounded-lg font-semibold shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center">
                                <i class="fas fa-sign-in-alt mr-2"></i>
                                ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®
                            </button>
                            
                            <button onclick="handleRegister()" 
                                class="w-full bg-white border-2 border-green-500 text-green-600 py-3 rounded-lg font-semibold hover:bg-green-50 transform hover:-translate-y-0.5 transition-all duration-200 flex items-center justify-center">
                                <i class="fas fa-user-plus mr-2"></i>
                                ‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®
                            </button>
                        </div>

                        <!-- ‡¶π‡ßá‡¶≤‡ßç‡¶™ ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü -->
                        <p class="text-xs text-center text-gray-400 mt-6">
                            <i class="fas fa-shield-alt mr-1"></i>
                            ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡ßß‡ß¶‡ß¶% ‡¶®‡¶ø‡¶∞‡¶æ‡¶™‡¶¶
                        </p>
                    </div>

                    <!-- ‡¶´‡ßÅ‡¶ü‡¶æ‡¶∞ -->
                    <div class="text-center mt-6">
                        <p class="text-sm text-gray-500">
                            <i class="fas fa-phone mr-1"></i>
                            ‡¶ú‡¶∞‡ßÅ‡¶∞‡¶ø ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßá: 01753119223
                        </p>
                    </div>
                </div>
            </div>
        `;
    }

    // ---------- ‡¶π‡ßã‡¶Æ‡¶™‡ßá‡¶ú ----------
    function renderHomePage() {
        app.innerHTML = `
            <div>
                <!-- ‡¶Æ‡ßá‡¶®‡ßÅ ‡¶¨‡¶æ‡¶∞ -->
                <div class="bg-gradient-to-r from-blue-700 to-sky-600 text-white p-4 flex justify-between items-center shadow-lg">
                    <i class="fas fa-bars text-2xl cursor-pointer hover:opacity-80"></i>
                    <h1 class="text-xl font-bold tracking-wide">‡¶Ü‡¶≤‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶¨‡¶æ</h1>
                    <i class="fas fa-user-circle text-2xl cursor-pointer hover:opacity-80"></i>
                </div>

                <!-- ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏ ‡¶ì ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶Æ‡¶æ‡¶®‡¶ø -->
                <div class="bg-gradient-to-br from-blue-500 to-sky-400 text-white p-6 shadow-inner">
                    <div class="text-center">
                        <p class="text-sm opacity-90 mb-1">‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</p>
                        <p class="text-4xl font-bold mb-4" id="balanceDisplay">‡ß≥ 0</p>
                        <button onclick="showAddMoneyModal()" class="bg-white text-blue-600 px-8 py-2 rounded-full font-semibold shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 transition-all duration-200">
                            <i class="fas fa-plus-circle mr-1"></i>Add Money
                        </button>
                    </div>
                </div>

                <!-- ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßÇ‡¶π -->
                <div class="p-4 border-b bg-gray-50">
                    <h2 class="font-semibold text-gray-700 mb-2 flex items-center">
                        <i class="fas fa-shopping-bag text-blue-600 mr-2"></i>
                        ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßÇ‡¶π
                    </h2>
                    <div id="ordersList" class="text-sm text-gray-500">
                        <p class="text-center py-3 bg-white rounded-lg shadow-sm">‡¶ï‡ßã‡¶® ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</p>
                    </div>
                </div>

                <!-- WhatsApp ‡¶¨‡¶æ‡¶ü‡¶® -->
                <div class="p-4">
                    <a href="https://wa.me/8801753119223" target="_blank" class="flex items-center justify-center bg-green-500 text-white p-3 rounded-lg shadow-md hover:shadow-lg transform hover:-translate-y-0.5 transition-all duration-200">
                        <i class="fab fa-whatsapp text-2xl mr-2"></i>
                        <span class="font-semibold">01753119223 - WhatsApp ‡¶è ‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó</span>
                    </a>
                </div>

                <!-- ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü -->
                <div class="p-4">
                    <h2 class="font-semibold text-gray-700 mb-3 flex items-center">
                        <i class="fas fa-list text-blue-600 mr-2"></i>
                        ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶∏‡¶Æ‡ßÇ‡¶π
                    </h2>
                    <div class="space-y-2" id="servicesList"></div>
                </div>
            </div>
        `;
        loadServices();
        loadUserBalance();
        loadOrders();
    }

    // ---------- ‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤ ----------
    function renderAdminPanel() {
        app.innerHTML = `
            <div class="min-h-screen bg-gray-100">
                <div class="bg-gradient-to-r from-blue-700 to-sky-600 text-white p-4 shadow-lg">
                    <h1 class="text-xl font-bold text-center">‡¶è‡¶°‡¶Æ‡¶ø‡¶® ‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤</h1>
                </div>
                
                <div class="p-4">
                    <!-- ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶Æ‡ßá‡¶®‡ßÅ -->
                    <div class="flex bg-white rounded-lg shadow-md p-1 mb-4">
                        <button onclick="showAdminTab('requests')" class="flex-1 py-2 text-center rounded-lg text-sm font-medium transition-all" id="tabRequests">‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü</button>
                        <button onclick="showAdminTab('services')" class="flex-1 py-2 text-center rounded-lg text-sm font-medium transition-all" id="tabServices">‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏</button>
                        <button onclick="showAdminTab('users')" class="flex-1 py-2 text-center rounded-lg text-sm font-medium transition-all" id="tabUsers">‡¶á‡¶â‡¶ú‡¶æ‡¶∞</button>
                    </div>

                    <!-- ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶®‡ßç‡¶ü ‡¶è‡¶∞‡¶ø‡¶Ø‡¶º‡¶æ -->
                    <div id="adminContent" class="bg-white rounded-lg shadow-md p-4"></div>
                </div>
            </div>
        `;
        showAdminTab('requests');
    }

    // ---------- ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®‡¶æ‡¶≤‡¶ø‡¶ü‡¶ø ----------
    window.handleLogin = async function() {
        const phone = document.getElementById('phone').value;
        const password = document.getElementById('password').value;
        if (!phone || !password) return alert('‡¶´‡ßã‡¶® ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®');
        
        try {
            const email = phone + '@app.com';
            await auth.signInWithEmailAndPassword(email, password);
            
            if (phone === '01828407381') {
                renderAdminPanel();
            } else {
                renderHomePage();
            }
        } catch (error) {
            alert('‡¶≤‡¶ó‡¶á‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ' + error.message);
        }
    };

    window.handleRegister = async function() {
        const phone = document.getElementById('phone').value;
        const password = document.getElementById('password').value;
        if (!phone || !password) return alert('‡¶´‡ßã‡¶® ‡¶ì ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®');
        
        try {
            const email = phone + '@app.com';
            const result = await auth.createUserWithEmailAndPassword(email, password);
            
            await db.collection('users').doc(result.user.uid).set({
                phone: phone,
                email: email,
                balance: 0,
                createdAt: new Date()
            });
            
            alert('‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∏‡¶´‡¶≤! ‡¶è‡¶ñ‡¶® ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®');
        } catch (error) {
            alert('‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶¨‡ßç‡¶Ø‡¶∞‡ßç‡¶•: ' + error.message);
        }
    };

    // Add Money Modal
    window.showAddMoneyModal = function() {
        app.innerHTML += `
            <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in" id="modal">
                <div class="bg-white rounded-2xl p-6 w-full max-w-md transform transition-all duration-300 scale-100">
                    <h3 class="text-xl font-bold mb-4 text-gray-800">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶° ‡¶Æ‡¶æ‡¶®‡¶ø</h3>
                    
                    <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <p class="text-sm text-gray-600 mb-1">‡¶¨‡¶ø‡¶ï‡¶æ‡¶∂ ‡¶™‡¶æ‡¶∞‡ßç‡¶∏‡ßã‡¶®‡¶æ‡¶≤</p>
                        <p class="text-lg font-bold text-blue-600">01828407381</p>
                        <button onclick="copyNumber()" class="text-blue-500 text-sm mt-1 hover:underline">
                            <i class="far fa-copy mr-1"></i>‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶™‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®
                        </button>
                    </div>
                    
                    <input type="number" id="amount" placeholder="‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ (‡¶ü‡¶æ‡¶ï‡¶æ)" class="w-full p-3 border rounded-lg mb-3">
                    <input type="text" id="trxId" placeholder="‡¶ü‡ßç‡¶∞‡¶æ‡¶®‡¶ú‡ßá‡¶ï‡¶∂‡¶® ‡¶Ü‡¶á‡¶°‡¶ø" class="w-full p-3 border rounded-lg mb-4">
                    
                    <button onclick="submitMoneyRequest()" class="w-full bg-blue-600 text-white p-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors mb-2">
                        ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü
                    </button>
                    <button onclick="closeModal()" class="w-full bg-gray-200 text-gray-700 p-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors">
                        ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>
        `;
    };

    window.copyNumber = function() {
        navigator.clipboard.writeText('01828407381');
        alert('‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ï‡¶™‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
    };

    window.closeModal = function() {
        document.getElementById('modal').remove();
    };

    window.submitMoneyRequest = async function() {
        const amount = document.getElementById('amount').value;
        const trxId = document.getElementById('trxId').value;
        
        if (!amount || !trxId) return alert('‡¶∏‡¶¨ ‡¶§‡¶•‡ßç‡¶Ø ‡¶¶‡¶ø‡¶®');
        
        await db.collection('moneyRequests').add({
            userId: currentUser.uid,
            userPhone: currentUser.email.replace('@app.com', ''),
            amount: parseInt(amount),
            transactionId: trxId,
            status: 'pending',
            timestamp: new Date()
        });
        
        alert('‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        closeModal();
    };

    // ‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶≤‡ßã‡¶°
    async function loadServices() {
        const services = [
            { id: 1, name: 'NID ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ü‡ßÅ PDF', icon: 'fa-id-card' },
            { id: 2, name: '‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶æ‡¶∞ ‡¶ï‡¶™‡¶ø', icon: 'fa-copy' },
            { id: 3, name: '‡¶®‡¶§‡ßÅ‡¶® ‡¶ú‡¶®‡ßç‡¶Æ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶®', icon: 'fa-baby' },
            { id: 4, name: '‡¶ú‡¶®‡ßç‡¶Æ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®', icon: 'fa-edit' },
            { id: 5, name: '‡¶ú‡¶®‡ßç‡¶Æ‡¶®‡¶ø‡¶¨‡¶®‡ßç‡¶ß‡¶® ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶®', icon: 'fa-pen' },
            { id: 6, name: 'NID ‡¶∏‡¶Ç‡¶∂‡ßã‡¶ß‡¶®', icon: 'fa-user-edit' },
            { id: 7, name: '‡¶®‡¶§‡ßÅ‡¶® ‡¶ü‡¶ø‡¶® ‡¶∏‡¶æ‡¶∞‡ßç‡¶ü‡¶ø‡¶´‡¶ø‡¶ï‡ßá‡¶ü', icon: 'fa-file-invoice' },
            { id: 8, name: '‡¶á-‡¶∞‡¶ø‡¶ü‡¶æ‡¶∞‡ßç‡¶®', icon: 'fa-chart-line' },
            { id: 9, name: '‡¶´‡ßã‡¶® ‡¶®‡¶æ‡¶Æ‡ßç‡¶¨‡¶æ‡¶∞ ‡¶ü‡ßÅ ‡¶è‡¶®‡¶Ü‡¶á‡¶°‡¶ø', icon: 'fa-mobile-alt' }
        ];

        let html = '';
        services.forEach(service => {
            html += `
                <div onclick="showServiceDetails('${service.id}')" class="flex items-center p-3 bg-white rounded-lg shadow-sm hover:shadow-md transition-all cursor-pointer border border-gray-100">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3">
                        <i class="fas ${service.icon} text-blue-600"></i>
                    </div>
                    <span class="flex-1 font-medium">${service.name}</span>
                    <span class="text-blue-600 font-bold">‡ßß‡ß¶‡ß¶‡ß≥</span>
                    <i class="fas fa-chevron-right text-gray-400 ml-2"></i>
                </div>
            `;
        });
        document.getElementById('servicesList').innerHTML = html;
    }

    async function loadUserBalance() {
        if (!currentUser) return;
        const doc = await db.collection('users').doc(currentUser.uid).get();
        if (doc.exists) {
            userBalance = doc.data().balance || 0;
            document.getElementById('balanceDisplay').textContent = `‡ß≥ ${userBalance}`;
        }
    }

    function loadOrders() {
        // ‡¶Ö‡¶∞‡ßç‡¶°‡¶æ‡¶∞ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ‡¶§‡ßá ‡¶á‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶Æ‡ßá‡¶®‡ßç‡¶ü)
    }

    // ---------- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® ----------
    window.showAdminTab = async function(tab) {
        // ‡¶ü‡ßç‡¶Ø‡¶æ‡¶¨ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡ßç‡¶ü‡¶ø‡¶≠ ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤
        ['Requests', 'Services', 'Users'].forEach(t => {
            const el = document.getElementById(`tab${t}`);
            if (el) {
                if (t.toLowerCase() === tab) {
                    el.classList.add('bg-blue-600', 'text-white');
                    el.classList.remove('text-gray-600');
                } else {
                    el.classList.remove('bg-blue-600', 'text-white');
                    el.classList.add('text-gray-600');
                }
            }
        });

        const content = document.getElementById('adminContent');
        
        if (tab === 'requests') {
            const snapshot = await db.collection('moneyRequests').where('status', '==', 'pending').get();
            let html = '<h3 class="font-bold mb-3 text-lg">‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü</h3>';
            
            if (snapshot.empty) {
                html += '<p class="text-gray-500 text-center py-4">‡¶ï‡ßã‡¶® ‡¶™‡ßá‡¶®‡ßç‡¶°‡¶ø‡¶Ç ‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á</p>';
            } else {
                snapshot.forEach(doc => {
                    const data = doc.data();
                    html += `
                        <div class="border-l-4 border-yellow-400 bg-yellow-50 p-3 rounded mb-2">
                            <p class="font-medium">üì± ${data.userPhone}</p>
                            <p class="text-lg font-bold">üí∞ ‡ß≥${data.amount}</p>
                            <p class="text-sm text-gray-600">‡¶ü‡ßç‡¶∞‡¶æ‡¶Ü‡¶á‡¶°‡¶ø: ${data.transactionId}</p>
                            <button onclick="approveRequest('${doc.id}', ${data.amount}, '${data.userId}')" 
                                class="mt-2 bg-green-500 text-white px-4 py-1 rounded text-sm hover:bg-green-600 transition-colors">
                                <i class="fas fa-check mr-1"></i>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠
                            </button>
                        </div>
                    `;
                });
            }
            content.innerHTML = html;
        }
        
        if (tab === 'services') {
            let html = '<h3 class="font-bold mb-3 text-lg">‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú</h3>';
            for (let i = 1; i <= 9; i++) {
                html += `
                    <div class="flex items-center gap-2 mb-2 bg-gray-50 p-2 rounded">
                        <span class="w-40">‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ${i}</span>
                        <input type="number" id="price${i}" value="100" class="border p-2 rounded flex-1">
                        <button onclick="updatePrice(${i})" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition-colors">
                            ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                        </button>
                    </div>
                `;
            }
            content.innerHTML = html;
        }
        
        if (tab === 'users') {
            const snapshot = await db.collection('users').get();
            let html = '<h3 class="font-bold mb-3 text-lg">‡¶∏‡¶ï‡¶≤ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞</h3>';
            
            if (snapshot.empty) {
                html += '<p class="text-gray-500 text-center py-4">‡¶ï‡ßã‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶®‡ßá‡¶á</p>';
            } else {
                snapshot.forEach(doc => {
                    const data = doc.data();
                    html += `
                        <div class="border p-3 rounded mb-2 bg-white hover:shadow transition-shadow">
                            <p class="font-medium">üì± ${data.phone}</p>
                            <p class="text-green-600 font-bold">‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏: ‡ß≥${data.balance || 0}</p>
                            <p class="text-xs text-gray-500">${new Date(data.createdAt?.toDate()).toLocaleDateString('bn-BD')}</p>
                        </div>
                    `;
                });
            }
            content.innerHTML = html;
        }
    };

    window.approveRequest = async function(requestId, amount, userId) {
        await db.collection('moneyRequests').doc(requestId).update({ status: 'approved' });
        
        const userRef = db.collection('users').doc(userId);
        const userDoc = await userRef.get();
        const currentBalance = userDoc.data().balance || 0;
        await userRef.update({ balance: currentBalance + amount });
        
        alert('‚úÖ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶™‡ßç‡¶∞‡ßÅ‡¶≠ ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá');
        showAdminTab('requests');
    };

    window.updatePrice = function(serviceId) {
        const price = document.getElementById(`price${serviceId}`).value;
        alert(`‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ${serviceId} ‡¶è‡¶∞ ‡¶™‡ßç‡¶∞‡¶æ‡¶á‡¶∏ ${price} ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá (Firebase ‡¶è ‡¶∏‡ßá‡¶≠ ‡¶π‡¶¨‡ßá)`);
    };

    window.showServiceDetails = function(serviceId) {
        alert('‡¶∏‡¶æ‡¶∞‡ßç‡¶≠‡¶ø‡¶∏ ‡¶°‡¶ø‡¶ü‡ßá‡¶á‡¶≤‡¶∏ ‡¶™‡ßá‡¶ú (‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ‡¶§‡ßá ‡¶Ø‡ßÅ‡¶ï‡ßç‡¶§ ‡¶π‡¶¨‡ßá)');
    };

    // ---------- ‡¶Ö‡¶• ‡¶∏‡ßç‡¶ü‡ßá‡¶ü ‡¶ö‡ßá‡¶ï ----------
    auth.onAuthStateChanged(async (user) => {
        if (user) {
            currentUser = user;
            const phone = user.email.replace('@app.com', '');
            
            if (phone === '01828407381') {
                renderAdminPanel();
            } else {
                renderHomePage();
            }
        } else {
            renderLoginPage();
        }
    });
</script>

<!-- ‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶®‡¶ø‡¶Æ‡ßá‡¶∂‡¶® -->
<style>
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    
    .animate-fade-in {
        animation: fadeIn 0.3s ease-in-out;
    }
    
    /* ‡¶Æ‡¶°‡¶æ‡¶∞‡ßç‡¶® ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤‡¶¨‡¶æ‡¶∞ */
    ::-webkit-scrollbar {
        width: 6px;
    }
    
    ::-webkit-scrollbar-track {
        background: #f1f1f1;
    }
    
    ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 3px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
</style>
</body>
</html>
